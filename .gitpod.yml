# This configuration file was automatically generated by Gitpod.
# Please adjust to your needs (see https://www.gitpod.io/docs/config-gitpod-file)
# and commit this file to your remote git repository to share the goodness with others.

image:
  file: .gitpod.dockerfile

tasks:
  - name: "create db"
    init: gp await-port 3306 && mysql -uroot --password= -e "create database usinnmodeler;" && gp sync-done createdb
  - name: "backend"
    env:
      PORT: "8080"
      API_KEY: "IEL5hx7JfsARUmZERRkWTqqxLK4SDzwM38HbwElQxmjIO9NhQy3lfjYruSAzHwBB"
      DB_PORT: "3306"
      DB_HOST: "localhost"
      DB_NAME: "usinnmodeler"
      DB_USERNAME: "root"
      DB_PASSWORD: ""
    init: gp sync-await createdb && npm install && npx sequelize-cli db:migrate
    command: npm run start
    
ports:
  - port: 8080
    onOpen: open-browser
    visibility: public
